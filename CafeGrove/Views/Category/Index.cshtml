@model IEnumerable<CafeGrove.Models.Category>

@{
    ViewBag.Title = "Index";
}

<h2>Menue</h2>

<p>
    @Html.ActionLink("Create New", "Create", "Category", new { @class = "btn btn-primary " })
</p>





<div class="wrapper center-block">
    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
        @{
            int i = 0;
            string href = "#collapse" + i;
            string id = "collapse" + i;
        }
        @foreach (var item in Model)
        {
            <div class="panel panel-default">
                <div class="panel-heading active" role="tab" id="headingOne">
                    <h4 class="panel-title">

                        <a role="button" data-toggle="collapse" data-parent="#accordion" href="@href" aria-expanded="true" aria-controls="collapseOne">
                            <b> @Html.DisplayFor(modelItem => item.Name)</b>
                        </a>
                        &nbsp;
                        @Html.ActionLink(" ", "Edit", new { id = item.Id }, new { @class = "btn btn-info glyphicon glyphicon-pencil btn-sm" }) &nbsp;
                        @Html.ActionLink(" ", "Create", "Product", new { categoryId = item.Id }, new { @class = "btn btn-primary glyphicon glyphicon-plus btn-sm" })
                    </h4>
                </div>
                <div id="@id" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
                    <div class="panel-body">
                        @if (item.Products.Count > 0)
                        {
                            <ul class="list-group">

                                @foreach (var product in item.Products)

                                {
                                    <li class="list-group-item">
                                        <b>Name:</b> @Html.DisplayFor(productItem => product.Name) &nbsp;&nbsp;
                                        <b>Price:</b> @Html.DisplayFor(productItem => product.Price)
                                        @Html.ActionLink(" ", "Edit", "Product", new { id = item.Id }, new { @class = "btn btn-info glyphicon glyphicon-pencil btn-sm" })
                                        &nbsp;
                                        @Html.ActionLink(" ", "Delete", "Product", new { id = item.Id }, new { @class = "btn btn-danger glyphicon glyphicon-remove btn-sm" })
                                    </li>

                                }
                            </ul>
                        }
                        else
                        {
                            @: There is no products for this category.
                        }
                    </div>
                </div>
            </div>

            i++;
        }
    </div>
</div>

@section Scripts {
    <script type="text/javascript">

        //$('.panel-collapse').on('show.bs.collapse', function () {
        //    $(this).siblings('.panel-heading').addClass('active');
        //});

        //$('.panel-collapse').on('hide.bs.collapse', function () {
        //    $(this).siblings('.panel-heading').removeClass('active');
        //});
    </script>
}